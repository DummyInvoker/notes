<!DOCTYPE html>

<html>
    <head>
        <title>video6</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="d3.v3.min.js" charset="utf-8"></script>
		
		<style>
			.axis text {
			  font: 15px sans-serif;
			}

			.axis path,
			.axis line {
			  fill: none;
			  stroke: #000;
			  shape-rendering: crispEdges;
			}
		</style>
    </head>
    
    
    <body>
    	<p>Groups and axes</p>
    </body>
    
    
    <script>
		var bar_height = 50
		var bar_widths = [20, 40, 50, 100, 60, 30, 10]
		var width = 500
		var height = 500
					
		var canvas = d3.select("body")
			.append("svg")
				.attr("width", width)
				.attr("height", height)
			.append("g")									// g: 添加一个组, 以后所有对canvas的操作都在这个组内
				.attr("transform", "translate(50, 50)")		// 设置偏移量, 给坐标轴留空间. 这样实际绘图空间变为450
		
		var widthScale = d3.scale.linear()
			.domain([0, d3.max(bar_widths)])
			.range([0, width-100]);							// width-left坐标留空-right坐标留空
		var colorScale = d3.scale.linear()
			.domain([0, d3.max(bar_widths)])
			.range(["green", "red"]);
					
		var bars = canvas.selectAll("rect")
			.data(bar_widths)
			.enter()
			.append("rect")
				.attr("y", function(d,i){return i*bar_height})
				.attr("width", function(bar_width){return widthScale(bar_width)})
				.attr("height", bar_height-1)
				.attr("fill", function(bar_width){return colorScale(bar_width)})
					
		var x_axis = d3.svg.axis()
				.scale(widthScale)
				.ticks(5)				// specify numbers of ticks
				.orient("bottom")
			
		canvas.append("g")
			.attr("class", "axis")
			.attr("transform", "translate(0," + bar_widths.length * bar_height +")")
			.call(x_axis);
    </script>
</html>
