<!DOCTYPE html>

<html>
    <head>
        <title>video13</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="d3.v3.min.js" charset="utf-8"></script>
    </head>
    
    
    <body>
    	<p>The Pie Layout</p>
    </body>
    
    
    <script>
		var canvas = d3.select("body").append("svg")
			.attr("width", 500)
			.attr("height", 500)
		var group = canvas.append("g")
			.attr("transform", "translate(250, 250)")

			
		var data = [10, 50, 80]
		var pie = d3.layout.pie().value(function(d) {return d})		//pie转化data数组为起止点数组对象, 类似video11中line转化[data]
		var arcs = group.selectAll(".arc")
			.data(pie(data))
			.enter()
			.append("g")

		
		var r = 200	
		var arc = d3.svg.arc()		// 与用arc画图区别: 这里的start和end由pie指定
			.innerRadius(r-100)
			.outerRadius(r)

		var colorScale = d3.scale.ordinal()
			.range(["red", "blue", "orange"])				
				
				
		arcs.append("path")
			.attr("d", arc)
			.attr("fill", function(d){return colorScale(d.data)})	//这里function(d)中的d指.data(pie(data))中的pie(data)的each, 看console可以取d.value或d.data
			
		arcs.append("text")
			.attr("transform", function(d){return "translate("+ arc.centroid(d)+")"})	// console输入:arc.centroid(pie(data)[0])	得到: [-33.378140093447186, -146.23918682727356]
			.text(function(d){return d.data})
			.attr("text-anchor", "middle")
			.attr("font-size", "1.5em")
    </script>
</html>